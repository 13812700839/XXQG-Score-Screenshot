(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tabBar-upload-upload"],{"1c41":function(e,t,n){"use strict";n.r(t);var i=n("ab27"),a=n.n(i);for(var u in i)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(u);t["default"]=a.a},"3cef":function(e,t,n){var i=n("9aa9");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("11ea1288",i,!0,{sourceMap:!1,shadowMode:!1})},"67fe":function(e,t,n){"use strict";var i=n("3cef"),a=n.n(i);a.a},"9aa9":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".uni-form-item .title[data-v-2a0346df]{padding:%?20?% 0}",""]),e.exports=t},ab27:function(e,t,n){"use strict";n("7a82");var i=n("dbce").default,a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var u=a(n("1da1"));n("99af");var s=i(n("8fc7")),r={data:function(){return{date:this.getDate(),image:null,imageFile:null}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},created:function(){s.commitsList().then((function(e){return s.checkBranch(e[0].sha)}))},methods:{formSubmit:function(){var e=this;if(uni.showLoading({title:"上传中"}),null!=this.image){var t=new FileReader;t.readAsDataURL(this.imageFile),t.onload=function(){var n=t.result;s.uploadImage(n,e.date,"images").then((function(t){201==t.status&&(setTimeout((function(){uni.hideLoading()}),2e3),uni.showToast({title:"上传成功",icon:"success",duration:2e3}),e.image=null,e.imageFile=null,e.date=e.getDate())}))}}else uni.showModal({content:"图片未上传，请上传图片后重新提交",showCancel:!1})},formReset:function(){this.date=this.getDate(),this.image=null,this.imageFile=null},bindDateChange:function(e){this.date=e.detail.value},getDate:function(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();return"start"===e?n-=60:"end"===e&&(n+=2),i=i>9?i:"0"+i,a=a>9?a:"0"+a,"".concat(n,"-").concat(i,"-").concat(a)},chooseImage:function(){var e=(0,u.default)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.chooseImage({sourceType:["album"],sizeType:["original","compressed"],count:1,success:function(e){t.image=e.tempFilePaths[0],t.imageFile=e.tempFiles[0]},fail:function(e){uni.showToast({title:e,icon:null,duration:2e3})}});case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),previewImage:function(e){var t=e.target.dataset.src;uni.previewImage({current:t,urls:[this.image]})},checkPermission:function(e){var t=this;return(0,u.default)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e?e-1:t.sourceTypeIndex,!permision.isIOS){n.next=7;break}return n.next=4,permision.requestIOS(sourceType[i][0]);case 4:n.t0=n.sent,n.next=10;break;case 7:return n.next=9,permision.requestAndroid(0===i?"android.permission.CAMERA":"android.permission.READ_EXTERNAL_STORAGE");case 9:n.t0=n.sent;case 10:return a=n.t0,null===a||1===a?a=1:uni.showModal({content:"没有开启权限",confirmText:"设置",success:function(e){e.confirm&&permision.gotoAppSetting()}}),n.abrupt("return",a);case 13:case"end":return n.stop()}}),n)})))()}}};t.default=r},cb51:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",[n("v-uni-form",{on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit.apply(void 0,arguments)},reset:function(t){arguments[0]=t=e.$handleEvent(t),e.formReset.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-list"},[n("v-uni-view",{staticClass:"uni-list-cell"},[n("v-uni-view",{staticClass:"uni-list-cell-left"},[e._v("请选择日期：")]),n("v-uni-view",{staticClass:"uni-list-cell-db"},[n("v-uni-picker",{attrs:{mode:"date",value:e.date,start:e.startDate,end:e.endDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDateChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.date))])],1)],1)],1)],1),n("v-uni-view",{staticClass:"uni-common-mt uni-common-pl"},[n("v-uni-view",{staticClass:"uni-uploader"},[n("v-uni-view",{staticClass:"uni-uploader-head"},[n("v-uni-view",{staticClass:"uni-uploader-title"},[e._v("点击可预览选好的图片")])],1),n("v-uni-view",{staticClass:"uni-uploader-body"},[n("v-uni-view",{staticClass:"uni-uploader__file"},[null!=e.image?[n("v-uni-view",{staticClass:"uni-uploader__file"},[n("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.image,"data-src":e.image},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}})],1)]:n("v-uni-view",{staticClass:"uni-uploader__input-box"},[n("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}})],1)],2)],1)],1)],1),n("v-uni-view",{staticClass:"uni-btn-v"},[n("v-uni-button",{attrs:{type:"primary","form-type":"submit"}},[e._v("提交")]),n("v-uni-button",{attrs:{"form-type":"reset"}},[e._v("重置")])],1)],1)],1)],1)},u=[]},fb0d:function(e,t,n){"use strict";n.r(t);var i=n("cb51"),a=n("1c41");for(var u in a)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(u);n("67fe");var s,r=n("f0c5"),o=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"2a0346df",null,!1,i["a"],s);t["default"]=o.exports}}]);